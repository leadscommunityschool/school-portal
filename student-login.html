<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Student Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
</head>

<body>

<header>
<nav>
<div class="logo">Leads Community School</div>
</nav>
</header>

<div class="hero">
<h2>Student Login</h2>
</div>

<div class="section">

<input id="sid" placeholder="Student ID">
<br><br>

<input id="pass" type="password" placeholder="Password">
<br><br>

<button onclick="login()">Login</button>

<p id="msg"></p>

</div>

<script>
function login(){

let sid = document.getElementById("sid").value;
let pass = document.getElementById("pass").value;

if(sid=="" || pass==""){
document.getElementById("msg").innerHTML="Fill all fields";
return;
}

fetch("https://script.google.com/macros/s/AKfycbx9YAB-O7R1gauxlCC5KcJWVQI6fvPmfMG9w1NH89himviKvPGk4kgKSWY1p--95J6D/exec",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
action:"studentLogin",
studentID:sid,
password:pass
})
})
.then(r=>r.json())
.then(d=>{
if(d.status=="success"){
localStorage.setItem("studentName",d.name);
localStorage.setItem("studentClass",d.class);
window.location="student-dashboard.html";
}else{
document.getElementById("msg").innerHTML="Wrong Login";
}
})
.catch(err=>{
document.getElementById("msg").innerHTML="Network error";
console.log(err);
});

}
</script>

</body>
</html>
